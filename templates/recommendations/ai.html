{% extends "base.html" %}
{% block head %}
  <title>{{ title or 'AI Picks' }} â€” AudioBook Request</title>
{% endblock head %}
{% block body %}
  <div class="w-screen flex flex-col items-center justify-center p-6 sm:p-8 overflow-x-hidden gap-6">
    <div class="w-full max-w-7xl flex items-center justify-between">
      <div>
        <h1 class="text-3xl font-bold">ðŸ¤– {{ title or 'AI Picks' }}</h1>
        {% if description %}
          <p class="opacity-70">{{ description }}</p>
        {% endif %}
      </div>
      <div class="flex items-center gap-2">
        <button class="btn btn-outline" hx-post="{{ base_url }}/recommendations/ai/refresh" hx-swap="none">Refresh</button>
        <a href="{{ base_url }}/search" class="btn btn-primary flex items-center gap-2" title="Search for books">
          <span>Search</span>
          {% include "icons/search.html" %}
        </a>
      </div>
    </div>

    {% if sections and sections|length > 0 %}
      {% for sec in sections %}
        <div class="w-full max-w-7xl mt-6">
          <div class="flex justify-between items-center mb-2">
            <div class="flex items-center gap-2">
              <h2 class="text-2xl font-bold">{{ sec.title }}</h2>
              {% if sec.description %}
              <div class="tooltip" data-tip="{{ sec.description }}">
                <span class="opacity-60 cursor-help">â“˜</span>
              </div>
              {% endif %}
            </div>
          </div>
          {% if sec.books and sec.books|length > 0 %}
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
              {% for book in sec.books %}
                <div>
                  {% include "components/book_card.html" %}
                </div>
              {% endfor %}
            </div>
          {% else %}
            <div class="text-center py-8 opacity-70">No books found for this category.</div>
          {% endif %}
        </div>
      {% endfor %}
    {% else %}
      <div class="w-full max-w-7xl text-center py-16">
        <div class="text-6xl opacity-20">ðŸ¤–</div>
        <h3 class="text-2xl font-semibold mt-2">No AI recommendations yet</h3>
        <p class="opacity-70 mt-1">Make sure the Ollama endpoint and model are configured in Settings.</p>
        <a href="{{ base_url }}/settings/ai" class="btn btn-primary mt-4">Open AI Settings</a>
      </div>
    {% endif %}
  </div>
{% endblock body %}
